<?xml version="1.0" encoding="utf-8"?> 
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-us">
    <generator uri="https://gohugo.io/" version="0.68.3">Hugo</generator><title type="html"><![CDATA[Hugo on /dev/yash/notes]]></title>
    
        <subtitle type="html"><![CDATA[The directory of my thoughts]]></subtitle>
    
    
    
            <link href="https://yashagarwal.in/tags/hugo/" rel="alternate" type="text/html" title="HTML" />
            <link href="https://yashagarwal.in/tags/hugo/index.xml" rel="alternate" type="application/rss+xml" title="RSS" />
            <link href="https://yashagarwal.in/tags/hugo/atom.xml" rel="self" type="application/atom+xml" title="Atom" />
            <link href="https://yashagarwal.in/tags/hugo/jf2feed.json" rel="alternate" type="application/jf2feed+json" title="jf2feed" />
    <updated>2020-03-31T12:08:56+00:00</updated>
    
    
    <author>
            <name>Yash Agarwal</name>
            
                <email>yashagarwaljpr@gmail.com</email>
            </author>
    
        <id>https://yashagarwal.in/tags/hugo/</id>
    
        
        <entry>
            <title type="html"><![CDATA[Develop a Theme for Hugo]]></title>
            <link href="https://yashagarwal.in/posts/2018/03/develop-a-theme-for-hugo/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://yashagarwal.in/posts/2017/02/setting-up-hugo-automatic-deployment-to-github-with-wercker/?utm_source=atom_feed" rel="related" type="text/html" title="Setting up Hugo automatic deployment to Github with Wercker" />
            
                <id>https://yashagarwal.in/posts/2018/03/develop-a-theme-for-hugo/</id>
            
            
                    <author>
                        <name>Yash Agarwal</name>
                    </author>
            <published>2018-03-02T11:27:05+05:30</published>
            <updated>2018-03-02T11:27:05+05:30</updated>
            
            
            <content type="html"><![CDATA[<p><em>This article was originally published on <a href="https://www.zeolearn.com/magazine/develop-a-theme-for-hugo">zeolearn</a>.</em></p>
<h2 id="introduction">Introduction</h2>
<p>In this tutorial, I will show you how to create a basic Hugo theme. I assume that you are familiar with basic HTML, and how to write content in markdown. I will be explaining the working of Hugo and how it uses Go templating language and how you can use these templates to organize your content. As this post will be focusing mainly on Hugo&rsquo;s working, I will not be covering CSS here.</p>
<p>We will be starting with some necessary information about the terminology used in Hugo. Then we will create a Hugo site with a very basic template. Then we will add new templates and posts to our site as we delve further into Hugo. With very slight variations to what you will learn here, you will be able to create different types of real-world websites.</p>
<p>Now, a short tutorial about the flow of this post. The commands that start with <code>$</code> are meant to be run in the terminal or command line. The output of the command will follow immediately. Comments will begin with <code>#</code>.</p>
<h2 id="some-terminology">Some Terminology</h2>
<h3 id="configuration-file">Configuration File</h3>
<p>Hugo uses a configuration file to identify common settings for your site. It is located in the root of your site. This file can be written in TOML, YAML or JSON formats. Hugo identifies this file using the extension.</p>
<p>By default, Hugo expects to find Markdown files in your <code>content/</code> directory and template files in your <code>themes/</code> directory. It will create HTML files in your <code>public/</code> directory. You can change this by specifying alternate locations in the configuration file.</p>
<h3 id="content">Content</h3>
<p>The content files will contain the metadata and text about your posts. A content file can be divided into two sections, the top section being frontmatter and the next section is the markdown that will be converted to HTML by Hugo. The content files reside in <code>/content</code> directory.</p>
<h3 id="frontmatter">Frontmatter</h3>
<p>The frontmatter section contains information about your post. It can be written in JSON, TOML or YAML. Hugo identifies the type of frontmatter used with the help of identifying tokens(markers). TOML is surrounded by <code>+++</code>, YAML is by <code>---</code> and JSON is enclosed in curly braces <code>{</code> and <code>}</code>. The information in the front matter of a content type will be parsed to be used in the template for that specific content type while converting to HTML.</p>
<p>I prefer to use YAML, so you might need to translate your configurations if you are using JSON or TOML.</p>
<p>This is an example of frontmatter written in YAML.
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml">---<span class="w">
</span><span class="w"></span><span class="k">date</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;2018-02-11T11:45:05+05:30&#34;</span><span class="w">
</span><span class="w"></span><span class="k">title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Basic Hugo Theming Tutorial.&#34;</span><span class="w">
</span><span class="w"></span><span class="k">description</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;A primer about theme development for Hugo, a static site generator written in Golang.&#34;</span><span class="w">
</span><span class="w"></span><span class="k">categories</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- Hugo<span class="w">
</span><span class="w">    </span>- Customization<span class="w">
</span><span class="w"></span><span class="k">tags</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- Theme<span class="w">
</span><span class="w"></span>---</code></pre></div></p>
<p>You can read more about different configuration options available for frontmatter <a href="https://gohugo.io/content-management/front-matter/#readout">here</a>.</p>
<h3 id="markdown">Markdown</h3>
<p>The markdown section is where you will write your actual post. The content written here will automatically be converted to HTML by Hugo with the help of a Markdown engine.</p>
<h3 id="templates">Templates</h3>
<p>In Hugo, templates govern the way; your content will be rendered to HTML. Each template provides a consistent layout when rendering the markdown content. The templates reside in the <code>/layouts</code> directory.</p>
<p>There are three types of templates: <em>single</em>, <em>list</em> and <em>partial</em>. Each kind of template take some content as input and transform it according to the way defined in the template.</p>
<h4 id="single-template">Single Template</h4>
<p>A single template is used to render a single page. The best example of this is <em>about</em> page.</p>
<h4 id="list-template">List Template</h4>
<p>A list template renders a group of related content. It can be all recent posts or all posts belonging to a particular category.</p>
<p>The homepage template is a specific type of list template. Hugo assumes that the homepage will serve as a bridge to all the other content on your website.</p>
<h3 id="partials">Partials</h3>
<p>Partials are short code snippets that can be injected in any other template type. They are instrumental when you want to repeat some content on every page of your website. The header and footer content are good candidates to be included in separate partials. It is a good practice to use partials liberally in your Hugo site as it adheres to <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> principle.</p>
<h2 id="okay-lets-start">Okay, Let&rsquo;s Start</h2>
<p>So now that you have a basic understanding of Hugo, we will create a new site using Hugo. Hugo provides a command to generate new sites. We will use that command to scaffold our site. It will create a basic skeleton of your site and will give you a basic configuration file.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ hugo new site ~/zeo
$ <span class="nb">cd</span> ~/zeo
$ ls -l
total <span class="m">28</span>
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:13 archetypes
-rw-r--r-- <span class="m">1</span> yash hogwarts   <span class="m">82</span> Feb <span class="m">11</span> 11:13 config.toml
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:13 content
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:13 data
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:13 layouts
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:13 static
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:13 themes</code></pre></div></p>
<p><strong>Note:</strong> I will use YAML format for the config file. Hugo, By default, uses TOML format.</p>
<p>A small description of this directory structure:</p>
<ul>
<li>
<p><strong>archetypes</strong>: The archetypes contains predefined frontmatter format for your website&rsquo;s content types. It facilitates consistent metadata format across all the content of your site.</p>
</li>
<li>
<p><strong>content</strong>: The content directory contains the markdown files that will be converted to HTML and served to the user.</p>
</li>
<li>
<p><strong>data</strong>: From Hugo documentation</p>
<blockquote>
<p>The data folder is where you can store additional data for Hugo to use when generating your site. Data files are not used to generate standalone pages; rather, they are meant to be supplemental to content files. This feature can extend the content in case your front matter fields grow out of control. Or perhaps you want to show a larger dataset in a template (see example below). In both cases, it is a good idea to outsource the data in their files.</p>
</blockquote>
</li>
<li>
<p><strong>layouts</strong>: The layouts folder stores all the templates files which form the presentation of the content files.</p>
</li>
<li>
<p><strong>static</strong>: The static folder will contain all the static assets such as <code>CSS</code>, <code>JS</code> and <code>image</code> files.</p>
</li>
<li>
<p><strong>themes</strong>: The themes folder is where we will be storing our theme.</p>
</li>
</ul>
<p>We will edit the <code>config.yaml</code> file to edit some basic configuration of the site.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ vim config.yaml
baseURL: /
title: <span class="s2">&#34;My First Blog&#34;</span>
defaultContentLanguage: en
languages:
  en:
    lang: en
    languageName: English
    weight: <span class="m">1</span>
MetaDataFormat: <span class="s2">&#34;yaml&#34;</span></code></pre></div></p>
<p>Now when you run your site, Hugo will show some errors. It is normal because our layouts and themes directories are still empty.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ hugo --verbose
INFO 2018/02/11 11:20:59 Using config file: /home/yash/zeo/config.yaml
Building sites … INFO 2018/02/11 11:20:59 syncing static files to /home/yash/zeo/public/
WARN 2018/02/11 11:20:59 No translation bundle found <span class="k">for</span> default language <span class="s2">&#34;en&#34;</span>
WARN 2018/02/11 11:20:59 Translation func <span class="k">for</span> language en not found, use default.
WARN 2018/02/11 11:20:59 i18n not initialized, check that you have language file <span class="o">(</span>in i18n<span class="o">)</span> that matches the site language or the default language.
WARN 2018/02/11 11:20:59 <span class="o">[</span>en<span class="o">]</span> Unable to locate layout <span class="k">for</span> <span class="s2">&#34;taxonomyTerm&#34;</span>:
...
...</code></pre></div></p>
<p>This command will also create a new directory called <code>public/</code>. This is the directory where Hugo will save all the generated HTML files related to your site. It also stores all static data in this folder.</p>
<p>Let&rsquo;s have a look at the <code>public</code> folder.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ls -l public/
total <span class="m">16</span>
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb  <span class="m">11</span> 11:22 categories
-rw-r--r-- <span class="m">1</span> yash hogwarts  <span class="m">400</span> Feb  <span class="m">11</span> 11:25 index.xml
-rw-r--r-- <span class="m">1</span> yash hogwarts  <span class="m">383</span> Feb  <span class="m">11</span> 11:25 sitemap.xml
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb  <span class="m">11</span> 11:22 tags</code></pre></div></p>
<p>Hugo generated some XML files, but there are no HTML files. It is because we have not created any content in our content directory yet.</p>
<p>At this point, you have a working site with you. All that is left is to add some content and a theme to your site.</p>
<h3 id="create-a-new-theme">Create a new theme</h3>
<p>Hugo doesn&rsquo;t ship with a default theme. There are a lot of themes available on Hugo website. Hugo also ships with a command to create new themes.</p>
<p>In this tutorial, we will be creating a theme called <code>zeo</code>. As mentioned earlier, my aim is to show you how to use Hugo&rsquo;s features to fill out your HTML files from the markdown content, I will not be focusing on CSS. So the theme will be ugly but functional.</p>
<p>Let&rsquo;s create a basic skeleton of the theme. It will create the directory structure of the theme and place empty files for you to fill in.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># run it from the root of your site</span>
$ hugo new theme zeo
$ ls -l themes/zeo/
total <span class="m">20</span>
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:30 archetypes
drwxr-xr-x <span class="m">4</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:30 layouts
-rw-r--r-- <span class="m">1</span> yash hogwarts <span class="m">1081</span> Feb <span class="m">11</span> 11:30 LICENSE.md
drwxr-xr-x <span class="m">4</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:30 static
-rw-r--r-- <span class="m">1</span> yash hogwarts  <span class="m">432</span> Feb <span class="m">11</span> 11:30 theme.toml</code></pre></div>
Fill out <code>LICENSE.md</code> and <code>theme.toml</code> file if you plan to distribute your theme to outside world.</p>
<p>Now we will edit our <code>config.yaml</code> file to use this theme.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ vim config.yaml
theme: <span class="s2">&#34;zeo&#34;</span></code></pre></div></p>
<p>Now that we have an empty theme, let&rsquo;s build the site.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ hugo --verbose
INFO 2018/02/11 11:34:14 Using config file: /home/yash/zeo/config.yaml
Building sites … INFO 2018/02/11 11:34:14 syncing static files to /home/yash/zeo/public/
WARN 2018/02/11 11:34:14 No translation bundle found <span class="k">for</span> default language <span class="s2">&#34;en&#34;</span>
WARN 2018/02/11 11:34:14 Translation func <span class="k">for</span> language en not found, use default.
WARN 2018/02/11 11:34:14 i18n not initialized, check that you have language file <span class="o">(</span>in i18n<span class="o">)</span> that matches the site language or the default language.

                   <span class="p">|</span> EN
+------------------+----+
  Pages            <span class="p">|</span>  <span class="m">3</span>
  Paginator pages  <span class="p">|</span>  <span class="m">0</span>
  Non-page files   <span class="p">|</span>  <span class="m">0</span>
  Static files     <span class="p">|</span>  <span class="m">0</span>
  Processed images <span class="p">|</span>  <span class="m">0</span>
  Aliases          <span class="p">|</span>  <span class="m">0</span>
  Sitemaps         <span class="p">|</span>  <span class="m">1</span>
  Cleaned          <span class="p">|</span>  <span class="m">0</span>

Total in <span class="m">12</span> ms</code></pre></div>
These warnings are harmless in our case, as we are developing our site in English only.</p>
<p>Hugo does two things while generating your website. It transforms all the content files to HTML using the defined templates, and its copies static files into the site. Static files are not transformed by Hugo. They are copied exactly as they are.</p>
<h3 id="the-cycle">The Cycle</h3>
<p>The usual development cycle when developing themes for Hugo is:</p>
<ul>
<li>Delete the <code>/public</code> folder</li>
<li>Run the built-in web server and open your site in the browser</li>
<li>Make changes to your theme files</li>
<li>View your changes in browser</li>
<li>Repeat step 3</li>
</ul>
<p>It is necessary to delete the <code>public</code> directory because Hugo does not try to remove any outdated files from this folder. So the old data might interfere with your workflow.</p>
<p>It is also a good idea to track changes in your theme with the help of a version control software. I prefer Git for this. You can use others according to your preference.</p>
<h3 id="run-your-site-in-the-browser">Run your site in the browser</h3>
<p>Hugo has a built-in web server which helps considerably while developing themes for Hugo. It also has a <em>live reload</em> and <em>watch</em> feature which watches for changes in your files and reloads the web page accordingly.</p>
<p>Run it with <code>hugo server</code> command.</p>
<p>Now open <a href="http://localhost:1313">http://localhost:1313</a> in your browser. By default, Hugo will not show anything, because it cannot find any HTML file in the public directory.</p>
<p>The command to load web server with <code>--watch</code> option is:
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ hugo server --watch --verbose
...
...
                   <span class="p">|</span> EN
+------------------+----+
  Pages            <span class="p">|</span>  <span class="m">4</span>
  Paginator pages  <span class="p">|</span>  <span class="m">0</span>
  Non-page files   <span class="p">|</span>  <span class="m">0</span>
  Static files     <span class="p">|</span>  <span class="m">0</span>
  Processed images <span class="p">|</span>  <span class="m">0</span>
  Aliases          <span class="p">|</span>  <span class="m">0</span>
  Sitemaps         <span class="p">|</span>  <span class="m">1</span>
  Cleaned          <span class="p">|</span>  <span class="m">0</span>

Total in <span class="m">11</span> ms
...
...</code></pre></div></p>
<h3 id="update-the-home-page-template">Update the Home page template</h3>
<p>Hugo looks for following directories in theme&rsquo;s <code>/layout</code> folder to search for <code>index.html</code> page.</p>
<ul>
<li>index.html</li>
<li>_default/list.html</li>
<li>_default/single.html</li>
</ul>
<p>It is always desirable to update the most specific template related to the content type. It is not a hard and fast rule, but a good generalization to follow.</p>
<p>We will first make a static page to see if our <code>index.html</code> page is rendered correctly.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim themes/zeo/layouts/index.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hello World!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div>
<p>Build the site and verify the results. You should see <em>Hello World!</em> when you open <a href="http://localhost:1313">http://localhost:1313</a>.</p>
<h3 id="building-a-functional-home-page">Building a functional Home Page</h3>
<p>Now we will create a home page which will reflect the content of our site every time we build it.</p>
<p>For that, we will first create some new posts. We will display these posts as a list on the home page and on their pages, too.</p>
<p>Hugo has a command for generating skeleton of posts, just like it did for sites and themes.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ hugo --verbose new post/first.md
INFO 2018/02/11 11:40:58 Using config file: /home/yash/zeo/config.yaml
INFO 2018/02/11 11:40:58 attempting to create <span class="s2">&#34;post/first.md&#34;</span> of <span class="s2">&#34;post&#34;</span> of ext <span class="s2">&#34;.md&#34;</span>
INFO 2018/02/11 11:40:58 curpath: /home/yash/zeo/archetypes/default.md
...
...
/home/yash/zeo/content/post/first.md created</code></pre></div></p>
<p>The <code>new</code> command uses an archetype to generate the frontmatter for new posts. When we created our site, hugo created a default archetype in the <code>/archetype</code> folder.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ cat archetypes/default.md
---
title: <span class="s2">&#34;{{ replace .Name &#34;</span>-<span class="s2">&#34; &#34;</span> <span class="s2">&#34; | title }}&#34;</span>
date: <span class="o">{{</span> .Date <span class="o">}}</span>

---</code></pre></div></p>
<p>It is a good idea to create a default archetype in the themes folder also so that users can override the theme&rsquo;s archetype with their archetype whenever they want.</p>
<p>We will create a new archetype for our posts&rsquo; frontmatter and delete the default <code>archetype/default.md</code>.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ rm -rf archetype/default.md
$ vim themes/zeo/archetypes/post.md
---
title: <span class="s2">&#34;{{ replace .Name &#34;</span>-<span class="s2">&#34; &#34;</span> <span class="s2">&#34; | title }}&#34;</span>
date: <span class="o">{{</span> .Date <span class="o">}}</span>
Description: <span class="s2">&#34;&#34;</span>
Tags: <span class="o">[]</span>
Categories: <span class="o">[]</span>

---</code></pre></div></p>
<p>Create one more post in <code>content/post</code> directory.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ hugo --verbose new post/second.md
INFO 2018/02/11 12:13:56 Using config file: /home/yash/zeo/config.yaml
INFO 2018/02/11 12:13:56 attempting to create <span class="s2">&#34;post/second.md&#34;</span> of <span class="s2">&#34;post&#34;</span> of ext <span class="s2">&#34;.md&#34;</span>
INFO 2018/02/11 12:13:56 curpath: /home/yash/zeo/themes/zeo/archetypes/post.md
...
...
/home/yash/zeo/content/post/second.md created</code></pre></div></p>
<p>See the difference. Hugo used the theme&rsquo;s archetype for generating the frontmatter this time.</p>
<p>By default, Hugo does not generate posts with an empty content section. So you will need to add some content before you try to build the site.</p>
<p>Let&rsquo;s look at the <code>content/post/first.md</code> file, after adding content to it.
<div class="highlight"><pre class="chroma"><code class="language-markdown" data-lang="markdown">$ cat content/post/first.md
---
title: &#34;First&#34;
date: 2018-02-11T11:35:58+05:30
draft: true
Tags: [&#34;first&#34;]
Categories: [&#34;Hugo&#34;]

---

Hi there. My first Hugo post</code></pre></div></p>
<p>Now that our posts are ready, we need to create templates to show them in a list on the home page and to show their content on separate pages for each post.</p>
<p>We will first edit the template for the home page that we created previously. We will then modify &ldquo;single&rdquo; templates which are used to generate output for a single content file. We also have &ldquo;list&rdquo; templates which are used to group similar type of content and render them as a list.
The home page will show a list of last ten posts that we have created. Let&rsquo;s update its template to add this logic.</p>
<h3 id="update-your-home-page-to-show-your-content">Update your home page to show your content</h3>
<p>Now add your template code to <code>themes/zeo/layouts/index.html</code>.
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim themes/zeo/layouts/index.html
$ cat !$
cat themes/zeo/layouts/index.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  {{ range first 10 .Data.Pages }}
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  {{ end }}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div></p>
<p>Hugo uses Go Template Engine. This engine scans the templates for commands that are enclosed between <code>{{</code> and <code>}}</code>. In this template, the commands are <code>range</code>, <code>first</code>, <code>.Data.Pages</code>, <code>.Title</code> and <code>end</code>.</p>
<p>The template implies that we are going to get first 10 latest pages from our content folder and render their title as <code>h1</code> heading.</p>
<p><code>range</code> is an iterator function. Hugo treats every HTML file created as a page, so <code>range</code> will loop through all the pages created. Here we are instructing <code>range</code> to stop after first ten pages.</p>
<p>The <code>end</code> command signals the end of the <em>range</em> iterator. The engine loops back to the next iteration as soon as it encounters the <em>end</em> command. Everything between <em>range</em> and <em>end</em> will be evaluated for each iteration of the loop.</p>
<p>Build the website and see the changes. The homepage now shows our two posts. However, you cannot click on the posts and read their content. Let&rsquo;s change that too.</p>
<h3 id="linking-your-posts-on-home-page">Linking your posts on Home Page</h3>
<p>Let&rsquo;s add a link to the post&rsquo;s page from home page.
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim themes/zeo/layouts/index.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  {{ range first 10 .Data.Pages }}
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  {{ end }}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div></p>
<p>Build your site and see the result. The titles are now links, but when you click on them, it takes you to a page which says <code>404 page not found</code>. That is expected because we have not created any template for the single pages where the content can be rendered. So Hugo could not find any template, and it did not output any HTML file. We will change that in a minute.</p>
<p>We want to render the posts, which are in <code>content/post</code> directory. That means that their section is post and their type is also post.</p>
<p>Hugo uses section and type information to identify the template file for each piece of content. It will first look for a template file which matches the section or type of the content. If it could not find it, then it will use <code>_default/single.html</code> file.</p>
<p>Since we do not have any other content type yet, we will just start by updating the <code>_default/single.html</code> file.</p>
<p>Remember that Hugo will use this file for every content type for which we have not created a template. However, for now, we will accept that cost as we do not have any other content type with us. We will refactor our templates to accommodate more content types, as we add more content.</p>
<p>Update the template file.
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim themes/zeo/layouts/_default/single.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  {{ .Content }}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div></p>
<p>Build the site and verify the results. You will see that on clicking on <code>first</code>, you get the usual result, but clicking on <code>second</code> still produces the <code>404 page not found</code> error. It is because Hugo does not generate pages with empty content. Remember I mentioned it earlier.</p>
<p>Now that we have our home page and posts page ready, we will build a page to list all the posts, not just the recent ten posts. This page will be accessible at <a href="http://localhost:1313/post">http://localhost:1313/post</a>. Currently, this page is blank because there is no template defined for it.</p>
<p>This page will show the listings of all the posts, so the type of this page will be a list. We will again use the default <code>_default/list.html</code> as we do not have any other content type with us.</p>
<p>Update the list file.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim themes/zeo/layouts/_default/list.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  {{ range .Data.Pages }}
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  {{ end }}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div>
<h3 id="add-date-published-to-the-posts">Add &ldquo;Date Published&rdquo; to the posts</h3>
<p>It is a standard practice to add the date on which the post was published on the blog. The front matter of our posts has a variable named <code>date</code>. We will use that variable to fetch the date. Our posts are using the default <em>single</em> template, so we will edit that file.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim themes/zeo/layouts/_default/single.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>{{ .Date.Format &#34;Sun, Feb 11, 2018&#34; }}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
  {{ .Content }}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div>
<hr>
<h2 id="adding-top-level-pages">Adding top-level Pages</h2>
<p>Okay, so now that we have our homepage, post-list page and post content pages in place, we will add a new <em>about</em> page at the top level of our blog, not at a sublevel like we did for posts.</p>
<p>Hugo uses the directory structure of the content directory to identify the structure of the blog. Let&rsquo;s verify that and create a new <code>about</code> page in the content directory.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim content/about.md
---
title: &#34;about&#34;
description: &#34;about this blog&#34;
date: &#34;2018-02-11&#34;
---

### about me

Hi there, you just reached my blog.</code></pre></div>
<p>Let&rsquo;s generate the site and view the results.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ hugo --verbose
$ ls -l public/
total <span class="m">36</span>
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 12:43 about
drwxr-xr-x <span class="m">3</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 12:43 categories
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:20 css
-rw-r--r-- <span class="m">1</span> yash hogwarts  <span class="m">187</span> Feb <span class="m">11</span> 12:43 index.html
-rw-r--r-- <span class="m">1</span> yash hogwarts <span class="m">1183</span> Feb <span class="m">11</span> 12:43 index.xml
drwxr-xr-x <span class="m">2</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 11:20 js
drwxr-xr-x <span class="m">4</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 12:43 post
-rw-r--r-- <span class="m">1</span> yash hogwarts <span class="m">1139</span> Feb <span class="m">11</span> 12:43 sitemap.xml
drwxr-xr-x <span class="m">3</span> yash hogwarts <span class="m">4096</span> Feb <span class="m">11</span> 12:43 tags</code></pre></div>
<p>Notice that Hugo created a new directory <code>about</code>. This directory contains only one file <code>index.html</code>. The about page will be rendered from <code>about/index.html</code>.</p>
<p>If you look carefully, the <code>about</code> page is listed with the posts on the homepage. It is not desirable, so let&rsquo;s change that first.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim themes/zeo/layouts/index.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>posts<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  {{ range first 10 .Data.Pages }}
    {{ if eq .Type &#34;post&#34;}}
      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    {{ end }}
  {{ end }}

  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>pages<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  {{ range .Data.Pages }}
    {{ if eq .Type &#34;page&#34; }}
      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    {{ end }}
  {{ end }}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div>
<p>Now build the site and verify the results. The homepage now has two sections, one for posts and other for the pages. Click on the <em>about</em> page. You will see the page for <em>about</em>. Remember, I mentioned that Hugo would use the <em>single</em> template for each page, for which it cannot find a template file. There is still one issue. The <em>about</em> page shows the date also. We do not want to show the date on the <em>about</em> page.</p>
<p>There are a couple of ways to fix this. We can add an if-else statement to detect the type of the content and display date only if it is a post. However, let&rsquo;s use the feature provided by Hugo and create a new template type for the posts. Before we do that, let&rsquo;s learn to use one more template type which is <em>partials</em>.</p>
<h2 id="partials-1">Partials</h2>
<p>In Hugo, partials are used to store the shared piece of code which repeats in more than one templates. Partials are kept in <code>themes/zeo/layouts/partials</code> directory. Partials can be used to override the themes presentation. End users can use them to change the default behavior of a theme. It is always a good idea to use partials as much as possible.</p>
<h3 id="header-and-footer-partials">Header and Footer partials</h3>
<p>Header and footer of most of the posts and pages will follow a similar pattern. So they form an excellent example to be defined as a partial.
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim themes/zeo/layouts/partials/header.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

$ vim themes/zeo/layouts/partials/footer.html
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div></p>
<p>We can call a partial by including this path in the template
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="p">{{</span> <span class="nx">partial</span> <span class="s">&#34;header.html&#34;</span> <span class="p">.</span> <span class="p">}}</span></code></pre></div></p>
<h2 id="update-the-homepage-template">Update the Homepage template</h2>
<p>Let&rsquo;s update our homepage template to use these partials.
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim themes/zeo/layouts/index.html
{{ partial &#34;header.html&#34; . }}

  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>posts<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  {{ range first 10 .Data.Pages }}
    {{ if eq .Type &#34;post&#34;}}
      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    {{ end }}
  {{ end }}

  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>pages<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  {{ range .Data.Pages }}
    {{ if or (eq .Type &#34;page&#34;) (eq .Type &#34;about&#34;) }}
      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Type }} - {{ .Title }} - {{ .RelPermalink }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    {{ end }}
  {{ end }}

{{ partial &#34;footer.html&#34; . }}</code></pre></div></p>
<h2 id="update-the-single-template">Update the single template</h2>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ vim themes/zeo/layouts/_default/single.html
{{ partial &#34;header.html&#34; . }}

  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>{{ .Date.Format &#34;Sun, Feb 11, 2018&#34; }}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
  {{ .Content }}

{{ partial &#34;footer.html&#34; . }}</code></pre></div>
<p>Build the website and verify the results. The title on the posts and the about page should both reflect the value from the markdown file.</p>
<h2 id="fixing-the-date-shown-on-about-page">Fixing the date shown on About page</h2>
<p>Remember, we had the issue that the date was showing on the <em>about</em> page also. We discussed one method to solve this issue. Now I will discuss a more <em>hugoic</em> way of solving this issue.</p>
<p>We will create a new section template to fix this issue.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">$ mkdir themes/zeo/layouts/post
$ vim themes/zeo/layouts/post/single.html
{{ partial &#34;header.html&#34; . }}

  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>{{ .Date.Format &#34;Mon, Jan 2, 2006&#34; }}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
  {{ .Content }}

{{ partial &#34;footer.html&#34; . }}


$ vim themes/zeo/layouts/_default/single.html
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ .Title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  {{ .Content }}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div>
<p>Note that we have changed the default <em>single</em> template and added that logic in post&rsquo;s <em>single</em> template.</p>
<p>Build the website and verify the results. The <em>about</em> page does not show the date now, but the posts page still show the date. We can also move the list template&rsquo;s logic to the <code>index.html</code> file of post section template.</p>
<h2 id="conclusion">Conclusion</h2>
<p>We have learnt, how Hugo harnesses the powerful yet simple Go template engine to create the static site generator. We also learnt about partials and their excellent utilization by Hugo in the spirit of <em>Don&rsquo;t Repeat Yourself</em> principle. Now that you know how to make themes in Hugo, go ahead and start creating new beautiful themes. Best of luck for your endaevour.</p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://yashagarwal.in/categories/technical" term="technical" label="Technical" />
                            
                        
                    
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://yashagarwal.in/tags/hugo" term="hugo" label="Hugo" />
                            
                        
                    
                
            
        </entry>
    
        
        <entry>
            <title type="html"><![CDATA[Setting up Hugo automatic deployment to Github with Wercker]]></title>
            <link href="https://yashagarwal.in/posts/2017/02/setting-up-hugo-automatic-deployment-to-github-with-wercker/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
            
                <id>https://yashagarwal.in/posts/2017/02/setting-up-hugo-automatic-deployment-to-github-with-wercker/</id>
            
            
                    <author>
                        <name>Yash Agarwal</name>
                    </author>
            <published>2017-02-22T13:37:56+05:30</published>
            <updated>2017-02-22T13:37:56+05:30</updated>
            
            
            <content type="html"><![CDATA[



    

    
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />

    
    <link rel="stylesheet" href="/css/photoswipe.min.d780348a887d97b4d6cc664301a2941706e4a02aeb1533524fcce3b7b9b64b4f.css">

    

    
    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
        
        <div class="pswp__bg"></div>
        
        <div class="pswp__scroll-wrap">
            
            <div class="pswp__container">
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
            </div>
            
            <div class="pswp__ui pswp__ui--hidden">
                <div class="pswp__top-bar">
                    
                    <div class="pswp__counter"></div>
                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                    <button class="pswp__button pswp__button--share" title="Share"></button>
                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                    
                    
                    <div class="pswp__preloader">
                        <div class="pswp__preloader__icn">
                            <div class="pswp__preloader__cut">
                                <div class="pswp__preloader__donut"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                    <div class="pswp__share-tooltip"></div>
                </div>
                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
                </button>
                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
                </button>
                <div class="pswp__caption">
                    <div class="pswp__caption__center"></div>
                </div>
            </div>
        </div>
    </div>

<p>Recently, I again migrated my blog from Pelican to Hugo. So till now, I have experimented with Wordpress, Jekyll, Pelican, and Hugo. Without any doubt, Hugo is the simplest to set up. This time, I have setup Hugo in Windows, as I think, in my system, I reinstall Windows OS much less frequently than the Linux. So that way, it will be less painful for me to set up the blog again.</p>
<p>In this post, I will list all the process which I used to set up automatic deployment of Hugo generated site to Github pages using Wercker. In the beginning, I was trying to use Travis-CI, but then I read about Wercker somewhere. I was impressed with the integration of Wercker with Hugo and the availability of many its community-generated “steps” for the build and deploy process.</p>
<p><a href="https://gohugo.io/overview/introduction/">Hugo Docs</a> already have a fantastic <a href="https://gohugo.io/tutorials/automated-deployments/">documentation</a> for setting up Hugo with Wercker, but it is outdated. Other documentations available on-line is also obsolete. Wercker has changed many functionalities in its platform, which made it difficult for me to set up things correctly. But after hours of trial and error cycle, I was able to build and deploy my static files successfully.</p>
<p>Here I would like to share the issues I encountered and the tweaks I’ve made. The source codes of this site can be found <a href="https://github.com/yash2696/yash2696.github.io">here</a>.</p>
<h2 id="project-pages-or-user-pages">Project Pages or User Pages</h2>
<p>Two types of sites are supported on Github Pages, User Site, and Project Site. User Sites will serve the files stored in the master branch of the repository <code>https://github.com/user_name/user_name.github.io</code> at the address <code>https://user_name.github.io.</code> For the Project sites, everything under the gh-pages will be served at the address <code>https://repo_name.github.io</code>.</p>
<p>My site is a User site, so I wanted all the static files to be saved in the master branch. As Hugo generates all the static files under <code>public</code> directory, I needed another branch to store my source files. So my made a new branch <code>source</code>, which will save all the source files for my blog. Don’t forget to remove the <code>.git</code> folder from the theme folder. Otherwise, the build will fail at a later stage. You can try using the git submodule feature to avoid this issue. I created a repository <code>yash2696.github.io</code> in Github also.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">git init                       <span class="c1">#initialized git repository in site root</span>
git checkout -b <span class="nb">source</span>         <span class="c1">#created new branch source</span>
git remote add origin https://github.com/yash2696/yash2696.github.io
git add .
git commit -m <span class="s2">&#34;Initial Commit&#34;</span>
git push origin source</code></pre></div>
<p>Then I initialized my master branch as a orphan branch.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">git checkout --orphan master
git rm -rf .
rm -f <span class="s1">&#39;.gitignore&#39;</span>
<span class="nb">echo</span> <span class="s2">&#34;#Your repository name&#34;</span> &gt; README.md
git add README.md
git commit -a -m <span class="s2">&#34;Initial Commit&#34;</span>
git push origin master</code></pre></div></p>
<h2 id="automatic-deployment-using-wrecker">Automatic deployment using Wrecker</h2>
<p>It is straightforward to build a Hugo site. Invoke <code>hugo</code> command under your root directory, Hugo will create a public folder which will contain all your content, static files, etc. Then push this directory to Github, and voila, your site is up!</p>
<p>What if a single push to <code>source</code> branch can trigger all the process for you automatically. Here the magic of continuous integration(CI) comes into the picture. A free Wercker account can be easily created and hooked to the Github account and a new application from a chosen repository. After setting up everything, a push to the development branch will automatically trigger the Wercker. One of the most significant advantages of using Wercker is its extensive collection of user-made and well documented &ldquo;steps&rdquo;. In this post, I will use two steps, <code>build hugo</code> and <code>deploy to Github</code>.</p>



    <link rel="stylesheet" href="/css/hugo-easy-gallery.css">
    


<div class="box fancy-figure caption-position-bottom caption-effect-appear"  itemscope itemtype="http://schema.org/ImageGallery">
    <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
        <div class="img">
            <img itemprop="thumbnail" src="/images/2017-02-22/wercker-steps.png" alt="Wercker → Registry → steps"/>
        </div>
        <a href="/images/2017-02-22/wercker-steps.png" itemprop="contentUrl"></a>
            <figcaption>
                    <p>Wercker → Registry → steps</p>
            </figcaption>
    </figure>
</div>

<p>The first task is to create a <code>wercker.yml</code> file. It will tell Wercker which all actions, it should perform. Here is my <a href="https://raw.githubusercontent.com/yash2696/yash2696.github.io/source/wercker.yml">wercker.yml</a> for reference. In this, I have used two pipelines, <em>build</em> and <em>deploy</em>. Please follow the official docs for the more detailed steps. I will list all the problems which I face while setting up things properly.</p>
<h3 id="build">Build</h3>
<p>Following the official guide, I used this <a href="https://github.com/ArjenSchwarz/wercker-step-hugo-build">step</a> to trigger Hugo to build HTML pages. I had already removed git repository information from the theme folder, so this step finished successfully. If you haven’t, you may add the following piece of code in your build step.
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">- script:
    name: install git
    code: <span class="p">|</span>
        apt-get update
        apt-get install git -y
    - script:
        name: initialize git submodules
        code: <span class="p">|</span>
            git submodule update --init --recursive</code></pre></div></p>
<h3 id="deploy">Deploy</h3>
<p>There is no concept named &ldquo;Add Deploy Target&rdquo; in Wercker as of now. Most of the on-line tutorials follow this process which is outdated. Now Wercker uses a concept called &ldquo;Workflows in Pipelines&rdquo;.</p>
<p>For new interface, even if you add a deploy stage in the <code>wercker.yml</code>, you will have to create a new pipeline <code>deploy</code> under the Workflows tab. After creating the pipeline, the &ldquo;YML Pipeline name&rdquo; must be set to the deploy stage name, which in this case is <code>deploy</code>.</p>
<p>In <code>deploy</code> stage, I used this <a href="https://app.wercker.com/applications/55af22c5f32b86a9290ec706/tab/details/">step</a> to deploy the built site to Github. Each pipeline starts from scratch, so for the deploy pipeline, the git package needs to be installed again. One also has to set up the environment variable <code>$GIT_TOKEN</code> to each pipeline, acquired from Github setting.</p>



<div class="box fancy-figure caption-position-bottom caption-effect-appear"  itemscope itemtype="http://schema.org/ImageGallery">
    <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
        <div class="img">
            <img itemprop="thumbnail" src="/images/2017-02-22/wercker-pipeline.png" alt="Wercker Pipeline"/>
        </div>
        <a href="/images/2017-02-22/wercker-pipeline.png" itemprop="contentUrl"></a>
            <figcaption>
                    <p>Wercker Pipeline</p>
            </figcaption>
    </figure>
</div>

<p>You need to generate a new access token for your deploy stage from Github settings.



<div class="box fancy-figure caption-position-bottom caption-effect-appear"  itemscope itemtype="http://schema.org/ImageGallery">
    <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
        <div class="img">
            <img itemprop="thumbnail" src="/images/2017-02-22/wercker-access-token.png" alt="Github Access Token"/>
        </div>
        <a href="/images/2017-02-22/wercker-access-token.png" itemprop="contentUrl"></a>
            <figcaption>
                    <p>Github Access Token</p>
            </figcaption>
    </figure>
</div>
</p>
<p>After adding the deploy stage, add the token you obtained from the Github to Environmental Variables in deploy pipeline.</p>



<div class="box fancy-figure caption-position-bottom caption-effect-appear"  itemscope itemtype="http://schema.org/ImageGallery">
    <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
        <div class="img">
            <img itemprop="thumbnail" src="/images/2017-02-22/wercker-token.png" alt="Wercker Token"/>
        </div>
        <a href="/images/2017-02-22/wercker-token.png" itemprop="contentUrl"></a>
            <figcaption>
                    <p>Wercker Token</p>
            </figcaption>
    </figure>
</div>

<p>On the next push to your development branch, Wercker will automatically build the site and deploy it on Github Pages.</p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://yashagarwal.in/categories/technical" term="technical" label="Technical" />
                            
                        
                    
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://yashagarwal.in/tags/gh-pages" term="gh-pages" label="gh-pages" />
                             
                                <category scheme="https://yashagarwal.in/tags/hugo" term="hugo" label="Hugo" />
                             
                                <category scheme="https://yashagarwal.in/tags/github" term="github" label="Github" />
                             
                                <category scheme="https://yashagarwal.in/tags/wercker" term="wercker" label="Wercker" />
                            
                        
                    
                
            
        </entry>
    
</feed>
