<?xml version="1.0" encoding="utf-8"?> 
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-us">
    <generator uri="https://gohugo.io/" version="0.68.3">Hugo</generator><title type="html"><![CDATA[Docker on /dev/yash/notes]]></title>
    
        <subtitle type="html"><![CDATA[The directory of my thoughts]]></subtitle>
    
    
    
            <link href="https://yashagarwal.in/tags/docker/" rel="alternate" type="text/html" title="HTML" />
            <link href="https://yashagarwal.in/tags/docker/index.xml" rel="alternate" type="application/rss+xml" title="RSS" />
            <link href="https://yashagarwal.in/tags/docker/atom.xml" rel="self" type="application/atom+xml" title="Atom" />
            <link href="https://yashagarwal.in/tags/docker/jf2feed.json" rel="alternate" type="application/jf2feed+json" title="jf2feed" />
    <updated>2020-04-07T12:02:29+00:00</updated>
    
    
    <author>
            <name>Yash Agarwal</name>
            
                <email>yashagarwaljpr@gmail.com</email>
            </author>
    
        <id>https://yashagarwal.in/tags/docker/</id>
    
        
        <entry>
            <title type="html"><![CDATA[Setting up ALM Octane with Docker Compose]]></title>
            <link href="https://yashagarwal.in/posts/2017/12/setting-up-alm-octane-with-docker-compose/?utm_source=atom_feed" rel="alternate" type="text/html" />
            
                <link href="https://yashagarwal.in/posts/2017/10/fixing-hindi-fonts-in-arch-linux/?utm_source=atom_feed" rel="related" type="text/html" title="Fixing Hindi Fonts in Arch Linux" />
                <link href="https://yashagarwal.in/posts/2017/03/mounting-ntfs-partitions-on-arch-linux/?utm_source=atom_feed" rel="related" type="text/html" title="Mounting NTFS partitions on Arch Linux" />
                <link href="https://yashagarwal.in/posts/2016/06/custom-arch-linux-setup-with-openbox/?utm_source=atom_feed" rel="related" type="text/html" title="Custom Arch Linux setup with Openbox" />
            
                <id>https://yashagarwal.in/posts/2017/12/setting-up-alm-octane-with-docker-compose/</id>
            
            
                    <author>
                        <name>Yash Agarwal</name>
                    </author>
            <published>2017-12-26T20:53:35+05:30</published>
            <updated>2017-12-26T20:53:35+05:30</updated>
            
            
            <content type="html"><![CDATA[<p>Recently, I got a chance to set up ALM Octane on one of my university servers for a course project. From the support page of ALM Octane:</p>
<blockquote>
<p>ALM Octane is a web-based application lifecycle management platform that enables teams to collaborate easily, manage the product delivery pipeline, and visualize the impact of changes.</p>
</blockquote>
<h2 id="precursor">Precursor</h2>
<p>My <a href="http://cse.nitc.ac.in">department</a> insists on using open-source software (a plus point, indeed!). But ALM Octane has Oracle DB/MSSQL as a dependency. My professor was not very enthusiastic about installing a proprietary database on the server. So I came up with a different approach. I set up this database (<a href="http://www.oracle.com/technetwork/database/database-technologies/express-edition/overview/index.html">free version</a> of Oracle DB, the Oracle Database 11g Express Edition) in a Docker container. ALM Octane has three components &ndash; Oracle DB, Elastic Search, and the Octane Server itself. The problem was to handle the condition that these three components should be installed on different machines. I decided to use three separate Docker containers for this isolation and then configured them to communicate with each other with docker-compose.</p>
<h3 id="wait--docker-compose">Wait &hellip; Docker Compose?</h3>
<p>(Skip this if already know about Docker and Compose)</p>
<blockquote>
<p>Docker-compose is a tool to define and run multi-container Docker applications. Compose uses a compose file to configure the services used by the applications. Then all the services and the application can be run by using a single command.</p>
</blockquote>
<p>So before reading this article any further, if you do not know about docker-compose, go and read about it.</p>
<h2 id="the-problem">The Problem</h2>
<p>Three primary services are required for the proper functioning of the Octane Server &ndash; Octane, Oracle DB and Elastic Search. The difficulty was to set up adequate configuration options for these services and the appropriate setup for communication between them. I searched on Docker Hub for any pre-built images. Fortunately, I found some pre-built Docker images for my purpose. So I started writing my config file.</p>
<h2 id="the-solution">The Solution</h2>
<p>Here is my config file for easy reference.
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;2&#39;</span><span class="w">
</span><span class="w"></span><span class="k">services</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">octane_oracle</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">image</span><span class="p">:</span><span class="w"> </span>alexeiled/docker-oracle-xe-11g<span class="w">
</span><span class="w">    </span><span class="k">shm_size</span><span class="p">:</span><span class="w"> </span>2g<span class="w">
</span><span class="w">    </span><span class="k">mem_limit</span><span class="p">:</span><span class="w"> </span>4g<span class="w">
</span><span class="w">  </span><span class="k">octane_es</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">image</span><span class="p">:</span><span class="w"> </span>elasticsearch<span class="p">:</span><span class="m">2.4</span><span class="w">
</span><span class="w">    </span><span class="k">environment</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- ES_HEAP_SIZE=4G<span class="w">
</span><span class="w">    </span><span class="k">mem_limit</span><span class="p">:</span><span class="w"> </span>4g<span class="w">
</span><span class="w">  </span><span class="k">octane</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="k">image</span><span class="p">:</span><span class="w"> </span>hpsoftware/almoctane<span class="w">
</span><span class="w">    </span><span class="k">ports</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="s2">&#34;8080:8080&#34;</span><span class="w">
</span><span class="w">    </span><span class="k">volumes</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- /opt/octane/conf<span class="p">:</span>/opt/octane/conf<span class="w">
</span><span class="w">      </span>- /opt/octane/log<span class="p">:</span>/opt/octane/log<span class="w">
</span><span class="w">      </span>- /opt/octane/repo<span class="p">:</span>/opt/octane/repo<span class="w">
</span><span class="w">    </span><span class="k">links</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- octane_oracle<span class="w">
</span><span class="w">      </span>- octane_es<span class="w">
</span><span class="w">    </span><span class="k">mem_limit</span><span class="p">:</span><span class="w"> </span>4g<span class="w">
</span><span class="w">    </span><span class="k">env_file</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- ./octane.env</code></pre></div></p>
<p>The configuration options in the code are for a system with RAM of 8GB. The options must be tuned for the best performance before deploying on the production server.</p>
<p>In the code, I have exposed port <code>8080</code> of the Octane Docker container to the port 8080 of the host machine. It will make sure that we can access the Octane application on <code>localhost:8080</code>. The <code>octane.env</code> file contains three variables for easy site management.</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml">SERVER_DOMAIN=<span class="s2">&#34;your domain name&#34;</span><span class="w">
</span><span class="w"></span>ADMIN_PASSWORD=<span class="s2">&#34;your password&#34;</span><span class="w">
</span><span class="w"></span><span class="c">#This disables the minimum memory check to enable to run on smaller machines.</span><span class="w">
</span><span class="w"></span>DISABLE_VALIDATOR_MEMORY=<span class="kc">true</span></code></pre></div>
<p>Now, if you try to run the container with <code>docker-compose up</code>, you will encounter various validation errors. It is because, before starting the server, you need to adjust some settings. If you noticed in the config file, there is a section to define volumes. These volumes are persistent and are used to keep changes saved between two docker-compose runs. I have mapped three volumes from the Docker container to the host machine. So you can now edit the files in the <code>/opt/octane/</code> folder on the host machine, and changes will reflect in the Docker container. The file where you will have to make changes is <code>/opt/octane/conf/setup.xml</code>.</p>
<p>You can read the documentation of ALM Octane to find out which settings to be changed. Once you do the necessary changes, fire up the command <code>docker-compose up</code> and wait for some time. Docker Compose will finish processing, and the server can be accessed on <a href="http://localhost:8080">http://localhost:8080</a> on the host machine. While deploying it on the production server, make sure that your network administrator has opened the port 8080 for your server. Otherwise, the site will not be accessible. Also, the docker-compose can be run in the background by issuing command <code>docker-compose up -d</code>.</p>
]]></content>
            
                 
                    
                         
                        
                            
                             
                                <category scheme="https://yashagarwal.in/categories/technical" term="technical" label="Technical" />
                            
                        
                    
                 
                    
                 
                    
                         
                        
                            
                             
                                <category scheme="https://yashagarwal.in/tags/arch-linux" term="arch-linux" label="Arch Linux" />
                             
                                <category scheme="https://yashagarwal.in/tags/docker" term="docker" label="Docker" />
                             
                                <category scheme="https://yashagarwal.in/tags/octane" term="octane" label="Octane" />
                            
                        
                    
                
            
        </entry>
    
</feed>
