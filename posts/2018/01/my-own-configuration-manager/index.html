<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='I have been using Linux since I was in my second year of undergraduate. My experiments with the dotfiles (configuration files) also started at the same time. For the uninformed, in Linux, it is common to configure a lot of settings and configurations within dotfiles. Dotfiles are files in a Linux user&rsquo;s home directory that begin with a dot or a full-stop character. This dot indicates to the operating system, that these files are used to store the settings of programs like vim or shells like bash or fish to name a few.'>

<meta property='og:title' content='My Own Configuration Manager • /dev/yash/notes'>
<meta property='og:description' content='I have been using Linux since I was in my second year of undergraduate. My experiments with the dotfiles (configuration files) also started at the same time. For the uninformed, in Linux, it is common to configure a lot of settings and configurations within dotfiles. Dotfiles are files in a Linux user&rsquo;s home directory that begin with a dot or a full-stop character. This dot indicates to the operating system, that these files are used to store the settings of programs like vim or shells like bash or fish to name a few.'>
<meta property='og:url' content='/posts/2018/01/my-own-configuration-manager/'>
<meta property='og:site_name' content='/dev/yash/notes'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='configuration'><meta property='article:tag' content='python'><meta property='article:tag' content='github'><meta property='article:published_time' content='2018-01-21T11:23:23&#43;05:30'/><meta property='article:modified_time' content='2018-01-21T11:23:23&#43;05:30'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.31.1" />

  <title>My Own Configuration Manager • /dev/yash/notes</title>
  <link rel='canonical' href='/posts/2018/01/my-own-configuration-manager/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Ubuntu:400,400i,700&subset=latin'>
<link rel='stylesheet' href='/assets/css/main.77da63e1.css'><link rel='stylesheet' href='/css/custom.css'><link rel='stylesheet' href='/css/syntax.css'>
</head>


<body class='page type-posts'>
  <div class='site'>

    <a class='screen-reader' href='#main'>Skip to Content</a>

    <header id='header' class='header-container'>
      <div class='header site-header'>
        <nav id='main-menu' class='main-menu-container' aria-label='Main Menu'>
  <ul class='main-menu'>
  <li>
      <a href='/'>Home</a>
    </li>
  <li>
      <a href='/posts'>Posts</a>
    </li>
  <li>
      <a href='/readingst'>Readings</a>
    </li>
  <li>
      <a href='/whoami'>whoami</a>
    </li>
  
  </ul>
</nav>

        <div class='header-info'>
          
          <p class='site-title title'>/dev/yash/notes</p>
          
          <p class='site-description subtitle'>The directory of my thoughts</p>
        </div>
      </div>
    </header>


<main id='main' class='main'>
  <article lang='en' class='entry'>
    <header class='header-container'>
  <div class='header entry-header'>
    <div class='header-info'>
      <h1 class='title'>My Own Configuration Manager</h1>
      

    </div>
    
<div class='meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader'>Posted on </span>
  <time class='date' datetime='2018-01-21T11:23:23&#43;05:30'>Jan 21, 2018</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
4 mins read
</span>


</div>


  </div>
</header>

    
    

    <div class='entry-content'>
  

<p>I have been using Linux since I was in my second year of undergraduate. My experiments with the dotfiles (configuration files) also started at the same time. For the uninformed, in Linux, it is common to configure a lot of settings and configurations within dotfiles. Dotfiles are files in a Linux user&rsquo;s home directory that begin with a dot or a full-stop character. This dot indicates to the operating system, that these files are used to store the settings of programs like <code>vim</code> or shells like <code>bash</code> or <code>fish</code> to name a few.</p>

<p>In the beginning, I was keeping a manual backup of my dotfiles by copying them  to a folder from time to time. But the list soon started getting huge, that it became very difficult for me to keep track of the changes. Then I moved to symlinks. I started symlinking all the dotfiles from my folder to their usual locations. This setup worked perfectly fine, but as my collection of dotfiles grew, It became very cumbersome for me to symlink each and every dotfile manually.</p>

<p>I also tried few tools built for this particular purpose. Some of them are <code>vcsh</code>, <code>mr</code>, and <code>stow</code>. These tools work just fine, but I was not willing to learn new tools just for maintaining my dotfiles. At last, I decided to write my own tool to solve this problem. This way, there will not be any external dependency and this tool will also become part of my dotfiles.</p>

<h3 id="design">Design</h3>

<p>The tool, in itself, is inspired by the <a href="https://en.wikipedia.org/wiki/Configuration_file#UNIX/Linux" target="_blank">UNIX tradition</a> of keeping configuration files for the settings of the programs. This configuration system uses a JSON formatted dotfile.</p>

<p><a href="https://github.com/yashhere/ConMan" target="_blank">Here</a> is the source code for the configuration system. Let&rsquo;s have a look at the file structure of the repository.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">|-- .backups
|   |-- 08-01-2018-15:47
|   |-- 08-01-2018-19:30
|   |-- ......
|-- configure.py
|-- current_status
|-- dotfiles
|   |-- dunst
|   |-- gtk-3.0
|   |-- i3
|   |-- ......
|-- dotfiles.json
|-- LICENSE
`-- README.md</code></pre></div>
<p>During the initial setup, you need to edit the <code>dotfiles.json</code> file to suit your setup. A relevant section of the JSON file is given below.</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;pre&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;cloning repository&#34;</span><span class="p">,</span>
      <span class="nt">&#34;command&#34;</span><span class="p">:</span> <span class="s2">&#34;git&#34;</span><span class="p">,</span>
      <span class="nt">&#34;subcommand&#34;</span><span class="p">:</span> <span class="s2">&#34;clone&#34;</span><span class="p">,</span>
      <span class="nt">&#34;argument&#34;</span><span class="p">:</span> <span class="s2">&#34;https://github.com/yashhere/dotfiles.git&#34;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&#34;linking&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;bashrc&#34;</span><span class="p">,</span>
        <span class="nt">&#34;src&#34;</span><span class="p">:</span> <span class="s2">&#34;dotfiles/.bashrc&#34;</span><span class="p">,</span>
        <span class="nt">&#34;dest&#34;</span><span class="p">:</span> <span class="s2">&#34;.bashrc&#34;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;bash_profile&#34;</span><span class="p">,</span>
        <span class="nt">&#34;src&#34;</span><span class="p">:</span> <span class="s2">&#34;dotfiles/.bash_profile&#34;</span><span class="p">,</span>
        <span class="nt">&#34;dest&#34;</span><span class="p">:</span> <span class="s2">&#34;.bash_profile&#34;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;profile&#34;</span><span class="p">,</span>
        <span class="nt">&#34;src&#34;</span><span class="p">:</span> <span class="s2">&#34;dotfiles/.profile&#34;</span><span class="p">,</span>
        <span class="nt">&#34;dest&#34;</span><span class="p">:</span> <span class="s2">&#34;.profile&#34;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;i3&#34;</span><span class="p">,</span>
        <span class="nt">&#34;src&#34;</span><span class="p">:</span> <span class="s2">&#34;dotfiles/i3&#34;</span><span class="p">,</span>
        <span class="nt">&#34;dest&#34;</span><span class="p">:</span> <span class="s2">&#34;.config/i3&#34;</span>
      <span class="p">},</span>
  <span class="p">]</span>
<span class="p">}</span></code></pre></div>
<p>As can be seen, the JSON file has an array variable <code>linking</code> which can be used to set the paths for each configuration file and folder. The <code>configure.py</code> script also requires a <code>dotfiles</code> folder to be present in the current directory. The folder can be created manually or if it is already version controlled on GitHub, then the script can clone it. For that, you can edit the <code>pre</code> section in the <code>dotfiles.json</code>.</p>

<p>Your dotfiles and config folders go inside the <code>dotfiles</code> folder. You just need to copy all your current configurations to this folder to get started.</p>

<p>So, how does the script know, where a file or folder will be linked to. Simple, you just need to edit the <code>dotfiles.json</code> file and add source and destination locations. For example, if you want to setup configurations of <code>i3</code> to its original location (which is, <code>$HOME/.config/i3</code>), then you need to create a new JSON object in the <code>linking</code> array, like this.</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;i3&#34;</span><span class="p">,</span>
  <span class="nt">&#34;src&#34;</span><span class="p">:</span> <span class="s2">&#34;dotfiles/i3&#34;</span><span class="p">,</span>
  <span class="nt">&#34;dest&#34;</span><span class="p">:</span> <span class="s2">&#34;.config/i3&#34;</span>
<span class="p">}</span></code></pre></div>
<p>Here the <code>name</code> is used to identify the configuration file, the <code>src</code> parameter is the location of your config file/folder in the dotfiles directory and the <code>dest</code> parameter is the final destination of the file/folder. Keen observers would notice that I have not used <code>$HOME</code> anywhere. It is understood that the configuration will go to the current user&rsquo;s home directory. So the <code>dest</code> is relative to the user&rsquo;s home directory and <code>src</code> is relative to the directory from which the <code>configure.py</code> script is executed.</p>

<p>And you are done! All you have to do is to run <code>configure.py</code> and all your dotfiles and folders will be symlinked to their correct place.</p>

<p>The <code>current_status</code> file saves all the symlink locations that are being managed by the script, for your easy reference and to debug any error.</p>

<h3 id="behind-the-scenes">Behind the Scenes</h3>

<p>A lot to cool things happen behind the scenes. The script will check if any previous symlink exists at the given <code>dest</code> location. It removes any symlinks to avoid redundancy. If the dest already has any dotfile or folder, then it backs it up in the <code>.backups</code> under current date and time before replacing it with symlink to avoid any potential data loss.</p>

<p>Hope the article was useful. Cheers 😄</p>

</div>

    
<footer class='entry-footer-container'>
  <div class='entry-footer'>
  <div class='categories'>
  <span class='taxonomyTerm-icon'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>
</span>
  <span class='screen-reader'>Categories: </span><a class='category' href='/categories/linux'>Linux</a>, <a class='category' href='/categories/programming'>Programming</a>, <a class='category' href='/categories/development'>Development</a></div>
<div class='tags'>
  <span class='taxonomyTerm-icon'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
</span>
  <span class='screen-reader'>Tags: </span><a class='tag' href='/tags/configuration'>Configuration</a>, <a class='tag' href='/tags/python'>Python</a>, <a class='tag' href='/tags/github'>Github</a></div>

  </div>
</footer>


    
  </article>
  
<nav class='entry-nav-container'>
  <div class='entry-nav'><div class='prev-entry'>
      <a href='/posts/2017/12/2017---the-best-till-now/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader'>Previous post: </span>2017 - The Best Till Now</a>
    </div><div class='next-entry'>
      <a href='/posts/2018/01/arch-linux-installation-guide-part-1/'>
        <span class='screen-reader'>Next post: </span>Arch Linux Installation Guide Part 1<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>

  
<div class='comments-container'>
  <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yashhere" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

</main>

    <footer id='footer' class='footer-container'>
      <div class='footer'>
        <div class='social-menu-container'>
  <nav aria-label='Social Menu'>
    <ul class='social-menu'><li>
        <a href='https://github.com/yashhere' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://facebook.com/profile.php?id=100001324105675' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Facebook account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://twitter.com/yash__here' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Twitter account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://instagram.com/yum_yash' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Instagram account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
  <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
  <line x1="17.5" y1="6.5" x2="17.5" y2="6.5"/>
  
</svg>
</a>
      </li><li>
        <a href='https://linkedin.com/in/theyashagarwal' target='_blank' rel='noopener'>
          <span class='screen-reader'>Open Linkedin account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</div>
        <div class='copyright'>
  <p>
        
          
        
      

       &copy; 2015-2018 Yash Agarwal  - Creative Commons Attribution-ShareAlike 4.0 International License
  </p>
</div>

      </div>
    </footer>

  </div><script src='/assets/js/main.f29c93b9.js'></script></body>

</html>

